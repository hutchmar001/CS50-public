{% extends "layout.html" %}

{% block title %}
    Home
{% endblock %}

{% block main %}

<p>The button was pressed <span id="displayCount">0</span> times.</p>
<form name="add" method="post">
    <select name="books" id="books" style="display:{{ display_select }}" onchange="location = this.value;">
        <option value="">Select...</option>
        <option value= "All">All</option>
        {% for i in result %}
            <option value= {{i}}>{{i}}</option>
        {% endfor %}
    </select>
</form>

<button id="search_upper" style="display:{{ display_hlight }}">Highlight</button>

<table action="/" method="get" class="table table-hover">

    <h1 style="color: sienna; display:{{ display_title }}">Welcome! Let's search for words in the Bible, Quran, and Bhagavad Gita</h1>
    <br>
    <form action="/search" method="get">
        <button class="btn btn-primary" style="display:{{ display_title }}">Let's go!</button>
    </form>
    <br><br>

    <img src="/static/cross.gif" alt="cross" width="150px" height="150px" style="display:{{ display_img }}">
    <img src="/static/allah.png" alt="Muslim man and crescent" width="120px" height="150px" style="display:{{ display_img }}">
    <img src="/static/om.png" alt="om symbol" width="150px" height="170px" style="display:{{ display_img }}">

    <tbody>
        <h1 style="display:{{ display1 }}">Bible</h1>
        <tr style="display:{{ display1 }}">
            <th>Number</th>
            <th>Book</th>
            <th>Chapter</th>
            <th>Verse</th>
            <th>Text</th>
        </tr>
        {% for i in lst %}
        <tr>
            <td>
                <p>{{i.number}}</p>
            </td>
            <td>
                <p>{{i.book_name}}</p>
            </td>
            <td>
                <p>{{i.chapter}}</p>
            </td>
            <td>
                <p>{{i.verse}}</p>
            </td>
            <td>
                <p>{{i.text}}</p>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<table action="/" method="get" class="table table-hover">
    <tbody>
        <h1 style="display:{{ display2 }}">Quran</h1>
        <tr style="display:{{ display2 }}">
            <th>Number</th>
            <th>Surah</th>
            <th>Verse</th>
            <th>Text</th>
        </tr>
        {% for i in lst2 %}
        <tr>
            <td>
                <p>{{i.num}}</p>
            </td>
            <td>
                <p>{{i.sura}}</p>
            </td>
            <td>
                <p>{{i.verse}}</p>
            </td>
            <td>
                <p>{{i.text}}</p>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<br><br>

<table action="/" method="get" class="table table-hover" >
    <tbody>
        <h1 style="display:{{ display3 }}">Bhagavad Gita</h1>
        <tr style="display:{{ display3 }}">
            <th>Number</th>
            <th>Chapter</th>
            <th>Verse</th>
            <th>Text</th>
        </tr>
        {% for i in lst3 %}
        <tr>
            <td>
                <p>{{i.Number}}</p>
            </td>
            <td>
                <p>{{i.Chapter}}</p>
            </td>
            <td>
                <p>{{i.Verse}}</p>
            </td>
            <td>
                <p>{{i.text}}</p>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<br><br>

<script>
    function highlight_u() {
        var search_upper = {{search_upper|tojson}}
        // Works great for passing Flask value to Javascript
        document.body.innerHTML = document.body.innerHTML.replace (new RegExp (search_upper, 'g'), "<mark>{{search_upper}}</mark>");
        highlight_l()
    }

    function highlight_l() {
        var search_lower = {{search_lower|tojson}}
        // Works great for passing Flask value to Javascript
        document.body.innerHTML = document.body.innerHTML.replace (new RegExp (search_lower, 'g'), "<mark>{{search_lower}}</mark>");
    }

    function dehighlight() {
        window.alert("Hello");
}

    var button = document.getElementById("search_upper");
    var count = 0;
    var display = document.getElementById("displayCount");

    button.onclick = function(){
    count ++;
    display.innerHTML = count;
    if (count % 2 == 0) {
        dehighlight();
    } else {
        highlight_u();
    }
};
</script>


{% endblock %}

